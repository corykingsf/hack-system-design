### 问题提出
- 创业初期，早期系统采用ALL in one架构
- 逐步的，开源框架组件，满足不了研发需求，怎么办？


早期，框架组件不需要自研
- 为什么早期不建议自研？
- (1)早期，业务以“快速迭代”为最高优先级
- (2)技术栈，以“自己熟悉的技术”为选型依据
  - 研发语言：熟悉PHP选PHP，熟悉java选java
  - 数据库：熟悉什么选什么
  - 框架组件：熟悉什么选什么, ruby on rails, php, ssh
- (3)此时，对合伙人的技术视野有一定要求

.NET框架后期成本变高：每个SQLServer license很贵


### 随着规模的扩大，需要控制技术栈
为什么要控制技术栈？
- （1）绝对不能每个人想用什么就用什么
    - 站点框架, team A用SSH, team b 用SSH()
    - 服务框架;team C用着REST, team D用着Duboo, team E用着thrift
    - 数据库访问：team x用着mybatis, team y用着DAO,team z用着jdbc

- (2)即使开源，技术栈也尽量统一

### 建议浅浅的封装一层
实例：命名空间包装了一层

![alt txt](https://raw.githubusercontent.com/corykingsf/hack-system-design-pixel/main/imgSnipaste_2021-06-22_08-23-25.png)
好处：
(1)对使用放屏蔽底层实现细节
(2)底层变化对调用放透明，调用方改动很小
### (3)未来能够方便的实现一些统一的功能，而不需要上游调用方进行任何改动

### 统一封装：一个简单的升级，所有调用方都可以使用这个功能了，实现调用链跟踪，统一的告警， sql执行时间，也可以使用相同的方法，因此，第三方库不但要统一，还可以浅浅的封装一层。

实例：实现统计访问的耗时

![alt txt](![alt txt](https://raw.githubusercontent.com/corykingsf/hack-system-design-pixel/main/imgSnipaste_2021-06-22_08-31-07.png)

改用jedis:

![alt txt](https://raw.githubusercontent.com/corykingsf/hack-system-design-pixel/main/imgSnipaste_2021-06-22_08-25-20.png)